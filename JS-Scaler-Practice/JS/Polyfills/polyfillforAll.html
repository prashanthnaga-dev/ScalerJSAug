
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script id='solution' defer>
        function all(promises) {
            const resolvePromiseAll = [];
            const countPromises = promises.length;
            let totalPromisesResolved = 0;

            return new Promise((resolve, reject) => {
                promises.forEach((promise, index) => {
                    promise
                        .then((result) => {
                            totalPromisesResolved++;
                            resolvePromiseAll[index] = result;

                            // Check if all promises have resolved
                            if (resolvePromiseAll === countPromises) {
                                resolve(resolvePromiseAll);
                            }
                        })
                        .catch((error) => {
                            reject(error);
                        });
                });
            });
        }
    </script>
</body>

</html>

<!-- function all(promises) {
    return new Promise((resolve, reject) => {
        // reject if no promises received
        if (promises.length === 0) {
            reject("No promises received");
        }

        const data = new Array(promises.length);

        promises.forEach((_promise, index) => {
            Promise.resolve(_promise)
                .then((result) => {
                    data[index] = result;

                    if (data.length === promises.length) {
                        resolve(data);
                    }
                })
                .catch((error) => {
                    reject(error);
                });
        });
    });
} -->
